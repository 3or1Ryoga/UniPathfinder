単なる機能追加ではなく、**ユーザー体験全体を「自己発見と価値創造の旅」として再設計**する視点で、以下の通り改善した要件定義書を提案します。

---

## 【改善版】要件定義書: TechMight - 学生の価値観と技術力を可視化するキャリア探索プラットフォーム

### 1. プロジェクトビジョンと目的

-   **ビジョン:** すべての学生エンジニアが、自身の「好き」という価値観と「得意」という技術力を深く理解し、それらが正当に評価される企業と出会える世界を創造する。
-   **目的:** ユーザーの自発的な情報提供を促進する仕組みを構築し、個人の内省データと客観的なGitHubアクティビティデータを組み合わせることで、学生と企業の間に「価値観レベル」での高品質なマッチング基盤を構築する。

### 2. 本改修の戦略的目標

本改修では、ユーザーエンゲージメントを最大化し、プラットフォームのコアバリューである「質の高い学生データ」を蓄積するため、以下の3つの戦略目標を達成します。

1.  **オンボーディング体験の刷新:** "書かされる" プロフィール入力を、"自己分析が加速する" 体験へと昇華させる。
2.  **継続的エンゲージメントの自動化:** GitHubとLINEの連携を最大限に活用し、ユーザーの活動状況に応じた能動的なコミュニケーションを実現する。
3.  **価値の可視化と行動変容:** プロフィール充実度の価値を可視化し、ユーザーが自らのキャリアのために情報を更新し続ける動機を設計する。

---

### 3. 機能要件詳細

#### 3.1. 【戦略目標1】オンボーディング体験の刷新

**概要:** 新規登録フローを「GitHub/LINE連携 → **必須情報入力（オンボーディング）** → ダッシュボード」の順序に変更し、サービスの価値を最初に体験させる重要なステップと位置づけます。

-   **UI/UX要件:**
    -   `/onboarding` という新しいルートを作成し、LINE連携完了後に必ずこのページにリダイレクトさせる。
    -   入力プロセスを複数のステップ（例：「基本情報」「学業について」「キャリアの価値観」「技術について」）に分割し、プログレスバーを表示することで、完了までの道のりを明確にする。
    -   各入力項目には、思考を促す問いかけと、質の高い回答例をプレースホルダーとして表示する。
        -   例：「仕事を通して実現したいこと」→ プレースホルダー: 「例：Webのパフォーマンスチューニングが好きなので、大規模サービスの速度改善に貢献し、数百万人のユーザー体験を向上させたいです。」

-   **情報収集項目（技術職向けに最適化）:**
    -   **基本情報:**
        -   `卒業予定年`: (選択式: 2025年卒, 2026年卒...)
        -   `名前（ニックネーム可）`
        -   `学歴`: (学部・学科)
    -   **キャリア・価値観:**
        -   `キャリアの関心`: (複数選択式: Web開発, モバイルアプリ開発, データサイエンス, ML/AI, インフラ, セキュリティ, ゲーム開発, その他)
        -   `興味のある技術スタック・言語`: (タグ形式入力)
        -   `仕事を通して実現したいこと`: (自由記述)
        -   `キャリアで重視すること`: (複数選択式: 技術的挑戦, プロダクトへの貢献, 社会的インパクト, ワークライフバランス, チーム文化, 給与・待遇)
        -   `希望勤務地`: (複数選択式)
    -   **経験・スキル:**
        -   `活動・職務経験`: (Markdown形式での自由記述)
        -   `ポートフォリオ/プロジェクトURL`: (複数登録可)
        -   `受賞・資格`: (自由記述)
    -   **AIに関する設問（新規）:**
        -   `AI/LLMの活用への考え`: (自由記述)
            -   ガイド: 「AI/LLMをあなたの開発プロセスにどう取り入れたいですか？または、AI技術そのものにどう関わっていきたいですか？」
-   **実装要件:**
    -   これらの情報は、既存の`profiles`テーブルの`bio`, `skills`, `interests`, `location`などのカラムを柔軟に活用して格納する。スキーマ変更ができない制約のため、複数の情報をJSON形式で1つのカラムに格納することも許容する。
    -   オンボーディングが完了していないユーザーは、ログイン時に必ず`/onboarding`にリダイレクトさせるロジックを`middleware.ts`に追記する。

---

#### 3.2. 【戦略目標2】継続的エンゲージメントの自動化

**概要:** ユーザーのGitHubアクティビティをトリガーに、LINEを通じて能動的にコミュニケーションを図るシステムを構築する。これにより、ユーザーの内省を促し、情報の鮮度を保ちます。

-   **システム要件（バックエンド）:**
    -   **アクティビティ検知:**
        -   Supabase Edge FunctionまたはGitHub Actionsのワークフローを拡張し、`github_daily_stats`テーブルを定期的に（例: 1日1回）スキャンするバッチ処理を実装する。
        -   **アクティブ検知ロジック:** 過去7日間の`commit_count`の合計が `10` を超えたユーザーを「アクティブ」と判定する。
        -   **停滞検知ロジック:** 過去14日間、`commit_count`が `0` のユーザーを「停滞」と判定する。
    -   **LINE通知:**
        -   上記で検知したユーザーに対し、LINE Messaging API (`api/webhooks/line/route.ts` を活用) を通じてパーソナライズされたメッセージを送信する。
        -   **メッセージ文例（アクティブ時）:**
            > 「〇〇さん、こんにちは！最近GitHubでの活動が素晴らしいですね🔥 今取り組んでいるプロジェクトについて、UniPathfinderに記録しませんか？他の学生や企業にあなたの頑張りをアピールできますよ！」
        -   **メッセージ文例（停滞時）:**
            > 「〇〇さん、こんにちは！最近の調子はいかがですか？もし新しい技術の学習を始めたり、アイデアを温めたりしていたら、ぜひUniPathfinderでそのプロセスを記録してみてください。思考の整理になりますよ！」

---

#### 3.3. 【戦略目標3】価値の可視化と行動変容

**概要:** ユーザーがログインした後の体験を再設計し、情報入力のモチベーションを高めるUI/UXを実装する。

-   **UI/UX要件:**
    -   **サイドバー/ハンバーガーメニューの実装:**
        -   アプリケーション全体に適用される共通レイアウトとして、サイドバーを導入する。
        -   メニュー項目として以下を設置する。
            -   `ホーム (マイプロフィール)`: 新設するプロフィール入力・閲覧ページ。
            -   `GitHubデータ`: 既存のダッシュボード (`/dashboard`)。
            -   `設定`: 既存の `/settings` ページ。
    -   **ホーム (マイプロフィール) ページの新設:**
        -   **目的:** ユーザーが自身の情報を一元管理し、企業からどう見えているかを体感できるページ。
        -   **プロフィール完成度の可視化:**
            -   オンボーディングで収集した各項目（`bio`, `skills`, `projects`の登録数など）の入力状況を基に、「プロフィール完成度」をパーセンテージで算出・表示する。
            -   プログレスバーと共に、「**完成度60%以上で、企業からの注目度が3倍に！**」といった具体的なメリットを提示し、情報入力を促す。
            -   未入力の項目をリストアップし、「これを入力して完成度を10%アップさせよう！」のように、次に行うべきアクションを明確に提示する。
        -   **プロフィールプレビュー:** 企業側から見えるプロフィール画面のプレビューを表示し、客観的な視点を提供する。
-   **実装要件:**
    -   `app`ディレクトリ内に `(main)` のようなルートグループを作成し、`layout.tsx`でサイドバーコンポーネントを適用する。
    -   `/home` または `/profile` ルートを作成し、プロフィール完成度表示コンポーネントと、`settings/page.tsx` を拡張した情報入力フォームを配置する。
    -   `middleware.ts`を更新し、ログイン後のデフォルトリダイレクト先を`/home`に変更する。

---

