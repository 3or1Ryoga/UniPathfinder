【実装指示書】TechMightへのGitHubアクティビティダッシュボード機能の追加
1. 機能追加の目的
既存のTechMightアプリケーションに、ユーザーのモチベーションを高めることを目的とした新しいダッシュボード機能を追加してください。この機能は、ユーザー自身のGitHubアクティビティを視覚的に魅力的な方法で表示し、日々の頑張りを実感できるようにするものです。

2. 実装要件：バックエンド (API Route)
2.1. ファイル作成

パス: src/app/api/github/dashboard-data/route.ts

責務: ダッシュボード表示に必要な全てのGitHubアクティビティデータを集計し、フロントエンドに提供するAPIエンドポイントを作成してください。

2.2. 実装詳細
このAPIエンドポイント (GETメソッド) は、以下の処理を実行する必要があります。

認証: Supabaseのサーバーサイドクライアントを使用し、リクエストからユーザーセッションを特定してください。セッションが存在しない場合は401エラーを返します。セッションからGitHubのprovider_token（アクセストークン）を安全に取得してください。

データ取得: 取得したアクセストークンと、profilesテーブルから取得したユーザーのgithub_usernameを使用し、github_activity_api_spec.md に記載のGitHub Events API (/users/{username}/events) を呼び出してください。直近30日分（または取得可能な最大件数）のイベントデータを取得します。

データ集計: 取得した生のイベントデータを、サーバーサイドで以下の3つのキーを持つ単一のJSONオブジェクトに集計・加工してください。

weeklySnapshot:

currentWeekCommits: 今週（月曜始まり）に行われたPushEventの総コミット数を計算してください。

previousWeekCommits: 先週（月曜始まり）の総コミット数を計算してください。

streakDays: 今日を基準として、コミットが一日でもあった日が何日間連続しているか（ストリーク）を計算してください。

growthChart:

過去8週間分のコミット数を、週ごとに集計した配列を生成してください。各要素は { weekStartDate: 'YYYY-MM-DD', commitCount: number } の形式とします。

milestones:

totalCommits: 取得できたイベントデータ内での総コミット数を計算してください。

badges: totalCommitsに基づき、ユーザーが達成したバッジのリストを生成してください。（例：{ name: '100 Commits', achievedAt: 'YYYY-MM-DD' }）

レスポンス: 上記で生成したJSONオブジェクトを、200 OKステータスで返却してください。APIリクエストや処理中にエラーが発生した場合は、適切なエラーコードとメッセージを返してください。

3. 実装要件：フロントエンド (Reactコンポーネント)
3.1. ダッシュボードページの作成

パス: src/app/dashboard/page.tsx

責務: ダッシュボードのレイアウトを定義し、各UIコンポーネントを統括する。

実装詳細:

このページはクライアントコンポーネント ('use client')としてください。

useEffectフックを使用して、ページの初回読み込み時に /api/github/dashboard-data エンドポイントにリクエストを送信し、データを取得してください。

データの取得中はローディングインジケーターを、エラー発生時はエラーメッセージを表示するUIを実装してください。

取得したデータを状態として保持し、各子コンポーネントにPropsとして適切に渡してください。

3.2. 個別コンポーネントの作成
以下のコンポーネントを src/components/dashboard/ ディレクトリ内に作成してください。

WeeklySnapshot.tsx:

UI要件: ユーザーの短期的なモチベーションを高めるための最重要セクションです。

中央: currentWeekCommitsを最も目立つスタイルで表示してください。

比較: currentWeekCommitsとpreviousWeekCommitsを比較し、「先週比 +X%」という形式で増減率を表示してください。増加は緑、減少は赤で色分けします。

進捗リング: RechartsライブラリのRadialBarChartを使い、週次目標（例: 50コミット）に対する進捗率を円形のプログレスバーで表示してください。

ストリーク: streakDaysが1以上の場合、炎のアイコン(🔥)と共に「X日間継続中！」と表示してください。

PersonalGrowthChart.tsx:

UI要件: ユーザーの長期的な成長を可視化します。

棒グラフ: RechartsライブラリのBarChartを使い、過去8週間のコミット数（growthChartデータ）を棒グラフで表示してください。

デザイン: グラフがポジティブな印象を与えるように、バーにグラデーションを適用する、最新の週のバーをハイライトするなどのデザインを加えてください。

タブ: 将来の機能拡張のため、「週別コミット」「言語別」「リポジトリ別」のタブUIを設置してください。今回は「週別コミット」のみがアクティブな状態とします。

MilestoneShowcase.tsx:

UI要件: ユーザーの達成感を刺激し、これまでの頑張りを称えます。

バッジ: milestones.totalCommitsの値に基づき、達成済みのバッジ（例: 10, 50, 100コミット）を計算して表示してください。

レイアウト: 最近達成したバッジを最大3つまで目立つように表示し、達成日も添えてください。

リンク: 「すべてのバッジを見る」というリンクを設置してください（現時点ではダミーリンクで構いません）。

4. 補足
全てのコンポーネントと関数には、TypeScriptによる厳密な型付けを行ってください。

スタイリングは既存のプロジェクトに合わせてTailwind CSSを全面的に活用してください。

github_implementation_requirements.md に記載されているAPIレート制限の考慮など、堅牢な実装を心がけてください。

以上の要件に従い、ダッシュボード機能の実装を開始してください。
