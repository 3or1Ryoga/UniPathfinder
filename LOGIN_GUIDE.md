# ログイン機能ガイド

## 利用可能なログイン方法

### 1. メール/パスワードログイン
- **新規登録**: メールアドレスとパスワードを入力して登録
- **ログイン**: 登録済みのメールアドレスとパスワードでログイン

### 2. マジックリンク
- メールアドレスのみでログイン
- パスワード不要で安全にログイン

## ログイン手順

### 新規登録
1. ホームページ（http://localhost:3000）にアクセス
2. 「アカウントをお持ちでない方はこちら」をクリック
3. メールアドレスとパスワードを入力
4. 「新規登録」ボタンをクリック
5. 確認メールが届くので、メール内のリンクをクリック
6. アカウントが有効化され、ログイン可能に

### ログイン（パスワード）
1. ホームページにアクセス
2. メールアドレスとパスワードを入力
3. 「ログイン」ボタンをクリック
4. 自動的に/accountページへリダイレクト

### ログイン（マジックリンク）
1. ホームページにアクセス
2. メールアドレスを入力
3. 「マジックリンクを送信」ボタンをクリック
4. メールを確認し、リンクをクリック
5. 自動的にログインされ、/accountページへリダイレクト

## セキュリティ設定

### Supabaseダッシュボードでの設定

1. **パスワードポリシー**
   - Authentication → Policies
   - 最小文字数、複雑さの要件を設定

2. **メール確認**
   - Authentication → Providers → Email
   - 「Confirm email」を有効化（推奨）

3. **セッション設定**
   - Authentication → Settings
   - JWT有効期限の設定

## トラブルシューティング

### ログインできない場合

1. **パスワードを忘れた場合**
   - 現在の実装では、Supabaseダッシュボードからパスワードリセットメールを送信
   - または、マジックリンクでログイン

2. **メールが届かない場合**
   - スパムフォルダを確認
   - Supabaseダッシュボードでメール設定を確認

3. **「Invalid login credentials」エラー**
   - メールアドレスとパスワードが正しいか確認
   - アカウントが有効化されているか確認（確認メールのリンクをクリック）

4. **リダイレクトされない場合**
   - ブラウザのコンソールでエラーを確認
   - middlewareが正しく設定されているか確認